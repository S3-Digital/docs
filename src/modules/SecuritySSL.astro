---
import { getDaysToExpiry, getSecurityLevel } from "../utils/sikora-core";

const { sslData } = Astro.props;
const daysLeft = getDaysToExpiry(sslData.ssl_expiry);
const level = getSecurityLevel(daysLeft);

const statusMessages = {
    safe: "Certyfikat jest bezpieczny",
    warning: "Uwaga: Certyfikat wkrótce wygaśnie!",
    danger: "KRYTYCZNE: Odnowienie natychmiastowe!",
};
---

<div class={`ssl-box ${level}`}>
    <h4>Tarcza Bezpieczeństwa: {sslData.domain}</h4>
    <p>{statusMessages[level]}</p>
    <div class="days-counter">Zostało dni: <strong>{daysLeft}</strong></div>
</div>

<style>
    .ssl-box {
        padding: 15px;
        border-left: 5px solid;
        border-radius: 8px;
        background: #1a1a1a;
        margin: 20px 0;
    }
    .safe {
        border-color: #48c774;
        color: #48c774;
    }
    .warning {
        border-color: #ffdd57;
        color: #ffdd57;
    }
    .danger {
        border-color: #f14668;
        color: #f14668;
        animation: pulse 2s infinite;
    }
    .days-counter {
        font-size: 1.2rem;
        margin-top: 10px;
        color: white;
    }
    @keyframes pulse {
        0% {
            opacity: 1;
        }
        50% {
            opacity: 0.5;
        }
        100% {
            opacity: 1;
        }
    }
</style>
