---
// Tu możemy dodać propsy, jeśli będziemy chcieli zmieniać URL dynamicznie
---

<div id="timeline-container" style="min-height: 100px;">
  <p style="text-align: center; color: var(--sl-color-gray-3);">Inicjalizacja połączenia z bazą notatek...</p>
</div>

<script>
  async function loadTimeline() {
    // UWAGA: Tu wstaw link do swojego Gista lub opublikowanego JSON-a
    const DATA_URL = 'https://gist.githubusercontent.com/S3-Digital/d5a8594fba4b01cfd985484a5417a64b/raw/2b7857a04e9fed1469154f03b297da647877320a/timeline.json';
    const container = document.getElementById('timeline-container');

    try {
      const res = await fetch(DATA_URL);
      if (!res.ok) throw new Error('Błąd pobierania');
      const data = await res.json();
      
      let html = '<section class="sl-steps"><ol>';
      data.forEach((item) => {
        const isDone = item.status === 'done';
        const badgeClass = isDone ? 'success' : 'note';
        const badgeText = isDone ? 'ZAKOŃCZONE' : 'W TOKU';
        
        html += `
          <li>
            <strong>${item.date}</strong> — ${item.team} 
            <span class="sl-badge ${badgeClass}" style="margin-left: 10px; font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; vertical-align: middle;">
              ${badgeText}
            </span><br/>
            <em style="color: var(--sl-color-white);">${item.task}</em> 
            <br/><small style="color: var(--sl-color-gray-3);">Zgłosił: ${item.author}</small>
          </li>`;
      });
      html += '</ol></section>';
      container.innerHTML = html;
    } catch (e) {
      container.innerHTML = `
        <div style="padding: 1rem; border: 1px solid #ef4444; color: #ef4444; border-radius: 8px;">
          <strong>Błąd połączenia:</strong> Nie udało się pobrać notatek. Sprawdź URL źródłowy.
        </div>`;
    }
  }

  // Uruchom po załadowaniu DOM
  loadTimeline();
</script>